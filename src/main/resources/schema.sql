DROP SCHEMA PUBLIC CASCADE;

create table BANK
(
    ID      INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    NAME    VARCHAR(32) NOT NULL
);

create table CLIENT
(
    ID       INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    NAME     VARCHAR(32) NOT NULL,
    PHONE    VARCHAR(32) NOT NULL,
    EMAIL    VARCHAR(32) NOT NULL,
    PASSPORT VARCHAR(32) NOT NULL,
    BANK_ID  INTEGER
);

create table CREDIT
(
    ID          INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    BANK_ID     INTEGER NOT NULL REFERENCES BANK(ID) ON DELETE CASCADE,
    NAME        VARCHAR(32) NOT NULL,
    LIMIT       INTEGER NOT NULL,
    PERCENTAGE  INTEGER NOT NULL
);

create table OFFER
(
    ID          INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    CLIENT_ID   INTEGER NOT NULL REFERENCES CLIENT(ID) ON DELETE CASCADE,
    CREDIT_ID   INTEGER NOT NULL REFERENCES CREDIT(ID) ON DELETE CASCADE,
    SUMMA         INTEGER NOT NULL,
    DURATION    INTEGER NOT NULL
);

